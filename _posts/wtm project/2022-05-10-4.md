---
title:  "wtm 프로젝트 여러 기능 결합"
excerpt: "프로젝트"

toc: true
toc_sticky: true
toc_label: "TOC"

categories:
  - project
last_modified_at: 2022-05-10T12:00:00-50:00
---

이번 목표는 **스크래핑과 메시지 전송 기능을 결합하는 것** 이다.

## 프로젝트 재확인
wtm 프로젝트는 정해진 시간에 학생생활관 주간식단표를 웹스크래핑하여 서버에 저장한 후 카카오톡 메시지를 통해 식단을 전송해주는 서비스제작을 목표로하고 있다.  
현재 이전 단계에서 웹스크래핑과 메시지 전송 기능 구현을 완료하였고 이번 단계에서 두가지 기능을 결합하며 정해진 시간에 기능을 실행하는 타이머 기능을 제작할 예정이다. 

## 타이머 기능 제작
python 타임 모듈을 이용하여 타이머 기능을 제작하였다. 시간을 계속 체크하여 정해진 시간에 여러 기능을 구동되게 구현하였다.  busywaiting을 방지하기 위해 sleep을 이용하여 시간을 체크한 후 30초 동안 대기하도록 설정하여 busywaiting을 줄이고자 하였다. 타이머 기능을 구현하는데에는 큰 어려움이 없었다.

## 여러 기능의 결합
웹스크래핑과 메시지 전송기능을 함수화하여 간단하게 사용할 수 있도록 구현하였기 때문에 비교적 쉽게 결합 할 수 있었다.  
타이머와 웹스크래핑을 결합하여 정해진 시간이 되면 식단 스크래핑해 시간에 따라 해당 요일의 아침, 점심, 저녁을 구분하여 가져왔고 문자열 형식으로 가져오는 함수를 따로 제작하였다.
이후 함수의 리턴값을 메시지 전송기능에 파라미터값으로 넣어줌으로서 메시지를 전송해주는 서비스를 완성하였다. 

## 실제 보내진 메시지의 예
![실제 사용예](/assets/images/wtm_test.jpeg){: width="50%" height="50%"}

## 결합된 서비스의 시퀸스 다이어그램
결합된 서비스의 시퀀스 다이어그램은 다음과 같다.
![시퀸스 다이어그램](/assets/images/Sequence%20Diagram.png){: width="70%" height="70%"}

